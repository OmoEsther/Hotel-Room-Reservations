(this["webpackJsonphotel-reservation"]=this["webpackJsonphotel-reservation"]||[]).push([[0],{179:function(e,n,t){"use strict";n.a='#pragma version 6\ntxn ApplicationID\nint 0\n==\nbnz main_l12\ntxn OnCompletion\nint DeleteApplication\n==\nbnz main_l11\ntxna ApplicationArgs 0\nbyte "make"\n==\nbnz main_l8\ntxna ApplicationArgs 0\nbyte "end"\n==\nbnz main_l5\nerr\nmain_l5:\nglobal LatestTimestamp\nbyte "RESERVE_ENDS"\napp_global_get\n>=\nbyte "RESERVED"\napp_global_get\nint 1\n==\n&&\nbyte "RESERVED_TO"\napp_global_get\ntxna Accounts 0\n==\n&&\ntxn Fee\nglobal MinTxnFee\nint 2\n*\n>=\n&&\nbnz main_l7\nint 0\nreturn\nmain_l7:\ntxna Accounts 0\nint 1000000\ncallsub sendfunds_0\nbyte "RESERVED_TO"\nbyte ""\napp_global_put\nbyte "RESERVE_ENDS"\nint 0\napp_global_put\nbyte "RESERVED"\nint 0\napp_global_put\nint 1\nreturn\nmain_l8:\nbyte "RESERVED"\napp_global_get\nint 0\n==\nglobal GroupSize\nint 2\n==\n&&\ngtxn 1 TypeEnum\nint pay\n==\ngtxn 1 Receiver\nglobal CurrentApplicationAddress\n==\n&&\ngtxn 1 Amount\nbyte "PRICE"\napp_global_get\ntxna ApplicationArgs 1\nbtoi\n*\nint 1000000\n+\n==\n&&\ngtxn 1 Sender\ngtxn 0 Sender\n==\n&&\n&&\nbnz main_l10\nint 0\nreturn\nmain_l10:\nbyte "RESERVED_TO"\ntxna Accounts 0\napp_global_put\nbyte "RESERVE_ENDS"\nglobal LatestTimestamp\ntxna ApplicationArgs 1\nbtoi\nint 60\n*\n+\napp_global_put\nbyte "RESERVED"\nint 1\napp_global_put\nint 1\nreturn\nmain_l11:\ntxn Sender\nglobal CreatorAddress\n==\nreturn\nmain_l12:\ntxn NumAppArgs\nint 4\n==\nassert\ntxn Note\nbyte "hotel-reservation:uv1"\n==\nassert\ntxna ApplicationArgs 3\nbtoi\nint 0\n>\nassert\nbyte "NAME"\ntxna ApplicationArgs 0\napp_global_put\nbyte "IMAGE"\ntxna ApplicationArgs 1\napp_global_put\nbyte "DESCRIPTION"\ntxna ApplicationArgs 2\napp_global_put\nbyte "PRICE"\ntxna ApplicationArgs 3\nbtoi\napp_global_put\nbyte "RESERVED"\nint 0\napp_global_put\nint 1\nreturn\n\n// send_funds\nsendfunds_0:\nstore 1\nstore 0\nitxn_begin\nint pay\nitxn_field TypeEnum\nload 0\nitxn_field Receiver\nload 1\nitxn_field Amount\nint 0\nitxn_field Fee\nitxn_submit\nretsub'},180:function(e,n,t){"use strict";n.a="#pragma version 6\nint 1\nreturn"},188:function(e,n,t){},206:function(e,n){},208:function(e,n){},21:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return o})),t.d(n,"f",(function(){return s})),t.d(n,"e",(function(){return i})),t.d(n,"c",(function(){return l})),t.d(n,"d",(function(){return u})),t.d(n,"b",(function(){return d}));var a=t(9),r=t(114),c=t.n(r),o=function(n){return e.from(n,"base64").toString("utf-8")},s=function(n){return e.from(n,"utf8").toString("base64")},i=function(e){if(e)return e.slice(0,5)+"..."+e.slice(e.length-5,e.length)},l=function(e){if(e)return new c.a(e).shiftedBy(-a.a).toFixed(3)},u=function(e){if(e)return new c.a(e).shiftedBy(a.a).toNumber()},d=function(e){if(0===e)return"--";var n=new Date(1e3*e);return n.toLocaleDateString("en-us",{weekday:"short",year:"numeric",month:"short",day:"numeric"})+", "+n.toLocaleString("en-us",{hour:"numeric",minute:"numeric",hour12:!0})}}).call(this,t(15).Buffer)},218:function(e,n){},220:function(e,n){},247:function(e,n){},249:function(e,n){},250:function(e,n){},255:function(e,n){},257:function(e,n){},276:function(e,n){},288:function(e,n){},291:function(e,n){},316:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(34),o=t.n(c),s=t(17),i=t(6),l=t(10),u=t.n(l),d=t(173),b=t(1),p=function(e){var n=e.name,t=e.coverImg,a=e.connect;return Object(b.jsxs)("div",{className:"d-flex justify-content-center flex-column text-center bg-black min-vh-100",children:[Object(b.jsxs)("div",{className:"mt-auto text-light mb-5",children:[Object(b.jsx)("div",{className:" ratio ratio-1x1 mx-auto mb-2",style:{maxWidth:"320px"},children:Object(b.jsx)("img",{src:t,alt:""})}),Object(b.jsx)("h1",{children:n}),Object(b.jsx)("p",{children:"Please connect your wallet to continue."}),Object(b.jsx)(d.a,{onClick:function(){return a()},variant:"outline-light",className:"rounded-pill px-3 mt-3",children:"Connect Wallet"})]}),Object(b.jsx)("p",{className:"mt-auto text-secondary",children:"Powered by Algorand"})]})},j=(t(188),t(326)),x=t(322),f=t(331),m=t(21),O=t(2),h=t(3),g=t(175),v=t.n(g),y=["size","address"],E=function(e){var n=e.size,t=e.address,a=Object(h.a)(e,y);return Object(b.jsx)("div",Object(O.a)(Object(O.a)({},a),{},{style:{width:"".concat(n,"px"),height:"".concat(n,"px")},children:Object(b.jsx)(v.a,{diameter:n,seed:parseInt(t.slice(2,10),16)})}))},w=function(e){var n=e.address,t=e.name,a=e.amount,r=e.symbol,c=e.disconnect;return n?Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(j.a,{children:[Object(b.jsxs)(j.a.Toggle,{variant:"light",align:"end",id:"dropdown-basic",className:"d-flex align-items-center border rounded-pill py-1",children:[a?Object(b.jsxs)(b.Fragment,{children:[Object(m.c)(a),Object(b.jsxs)("span",{className:"ms-1",children:[" ",r]})]}):Object(b.jsx)(x.a,{animation:"border",size:"sm",className:"opacity-25"}),Object(b.jsx)(E,{address:n,size:28,className:"ms-2 me-1"})]}),Object(b.jsxs)(j.a.Menu,{className:"shadow-lg border-0",children:[Object(b.jsx)(j.a.Item,{href:"https://testnet.algoexplorer.io/address/".concat(n),target:"_blank",children:Object(b.jsxs)(f.a,{direction:"horizontal",gap:2,children:[Object(b.jsx)("i",{className:"bi bi-person-circle fs-4"}),Object(b.jsxs)("div",{className:"d-flex flex-column",children:[t&&Object(b.jsx)("span",{className:"font-monospace",children:t}),Object(b.jsx)("span",{className:"font-monospace",children:Object(m.e)(n)})]})]})}),Object(b.jsx)(j.a.Divider,{}),Object(b.jsxs)(j.a.Item,{as:"button",className:"d-flex align-items-center",onClick:function(){c()},children:[Object(b.jsx)("i",{className:"bi bi-box-arrow-right me-2 fs-4"}),"Disconnect"]})]})]})}):null},R=t(325),N=t(329),A=t(30),_=t(327),S=t(328),C=t(177),T=function(e){var n=e.createNewRoom,t=Object(a.useState)(""),r=Object(i.a)(t,2),c=r[0],o=r[1],s=Object(a.useState)(""),l=Object(i.a)(s,2),u=l[0],p=l[1],j=Object(a.useState)(""),x=Object(i.a)(j,2),f=x[0],O=x[1],h=Object(a.useState)(0),g=Object(i.a)(h,2),v=g[0],y=g[1],E=Object(a.useCallback)((function(){return c&&u&&f&&v>0}),[c,u,f,v]),w=Object(a.useState)(!1),R=Object(i.a)(w,2),N=R[0],A=R[1],T=function(){return A(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.a,{onClick:function(){return A(!0)},variant:"dark",className:"rounded-pill px-0",style:{width:"38px"},children:Object(b.jsx)("i",{className:"bi bi-plus"})}),Object(b.jsxs)(_.a,{show:N,onHide:T,centered:!0,children:[Object(b.jsx)(_.a.Header,{closeButton:!0,children:Object(b.jsx)(_.a.Title,{children:"New Room"})}),Object(b.jsx)(S.a,{children:Object(b.jsxs)(_.a.Body,{children:[Object(b.jsx)(C.a,{controlId:"inputName",label:"Room name",className:"mb-3",children:Object(b.jsx)(S.a.Control,{type:"text",onChange:function(e){o(e.target.value)},placeholder:"Enter room name"})}),Object(b.jsx)(C.a,{controlId:"inputUrl",label:"Image URL",className:"mb-3",children:Object(b.jsx)(S.a.Control,{type:"text",placeholder:"Image URL",value:u,onChange:function(e){p(e.target.value)}})}),Object(b.jsx)(C.a,{controlId:"inputDescription",label:"Description",className:"mb-3",children:Object(b.jsx)(S.a.Control,{as:"textarea",placeholder:"description",style:{height:"80px"},max:115,onChange:function(e){O(e.target.value)}})}),Object(b.jsx)(C.a,{controlId:"inputPrice",label:"Price Per Night in ALGO",className:"mb-3",children:Object(b.jsx)(S.a.Control,{type:"text",placeholder:"Price",onChange:function(e){y(Object(m.d)(e.target.value))}})})]})}),Object(b.jsxs)(_.a.Footer,{children:[Object(b.jsx)(d.a,{variant:"outline-secondary",onClick:T,children:"Close"}),Object(b.jsx)(d.a,{variant:"dark",disabled:!E(),onClick:function(){n({name:c,image:u,description:f,price:v}),T()},children:"Save new Room"})]})]})]})},I=t(176),k=t(330),D=t(323),F=function(e){var n=e.address,t=e.room,r=e.makeReservation,c=e.endReservation,o=e.deleteRoom,s=t.appId,l=t.name,u=t.image,p=t.description,j=t.price,x=t.reservedTo,O=t.reserveEnds,h=t.isReserved,g=t.appCreator,v=Date.now(),y=Object(a.useState)(1),w=Object(i.a)(y,2),R=w[0],N=w[1],A=function(){return 1===h};return Object(b.jsx)(I.a,{children:Object(b.jsxs)(k.a,{className:"h-100",children:[Object(b.jsx)(k.a.Header,{children:Object(b.jsxs)(f.a,{direction:"horizontal",gap:2,children:[Object(b.jsx)("span",{className:"font-monospace text-secondary",children:x?Object(m.e)(x):Object(b.jsx)(b.Fragment,{})}),Object(b.jsx)(E,{size:28,address:x}),Object(b.jsx)(D.a,{bg:"secondary",className:"ms-auto",children:A()?"RESERVED":"AVAILABLE"})]})}),Object(b.jsx)("div",{className:"ratio ratio-4x3",children:Object(b.jsx)("img",{src:u,alt:l,style:{objectFit:"cover"}})}),Object(b.jsxs)(k.a.Body,{className:"d-flex flex-column text-center",children:[Object(b.jsx)(k.a.Title,{children:l}),Object(b.jsx)(k.a.Text,{className:"flex-grow-1",children:p}),Object(b.jsx)(k.a.Text,{className:"flex-grow-1",children:O?"Reservation ends: ".concat(Object(m.b)(O)):""}),Object(b.jsxs)(S.a,{className:"d-flex align-content-stretch flex-row gap-2",children:[x===n&&A()?Object(b.jsx)(d.a,{variant:"outline-dark",onClick:function(){return c(t)},disabled:!(v>=new Date(1e3*O)),className:"w-100 py-3",children:"End Reservation"}):A()?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(d.a,{variant:"outline-dark",disabled:A(),className:"w-100 py-3",children:"Reserved"})}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(C.a,{controlId:"inputCount",label:"Nights",className:"w-25",children:Object(b.jsx)(S.a.Control,{type:"number",value:R,min:"1",disabled:A(),onChange:function(e){N(Number(e.target.value))}})}),Object(b.jsxs)(d.a,{variant:"outline-dark",disabled:A(),onClick:function(){return r(t,R)},className:"w-75 py-3",children:["Reserve for ",Object(m.c)(j)*R," ALGO"]})]}),g===n&&Object(b.jsx)(d.a,{variant:"outline-danger",onClick:function(){return o(t)},className:"btn",children:Object(b.jsx)("i",{className:"bi bi-trash"})})]})]})]})},s)},P=function(){return Object(b.jsx)("div",{className:"d-flex justify-content-center",children:Object(b.jsx)(x.a,{animation:"border",role:"status",className:"opacity-25",children:Object(b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},B=function(){return Object(b.jsx)(A.a,{position:"bottom-center",autoClose:5e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!1,pauseOnHover:!0})},V=function(e){var n=e.text;return Object(b.jsxs)("div",{children:[Object(b.jsx)("i",{className:"bi bi-check-circle-fill text-success mx-2"}),Object(b.jsx)("span",{className:"text-secondary mx-1",children:n})]})},L=function(e){var n=e.text;return Object(b.jsxs)("div",{children:[Object(b.jsx)("i",{className:"bi bi-x-circle-fill text-danger mx-2"}),Object(b.jsx)("span",{className:"text-secondary mx-1",children:n})]})},z={text:""};V.defaultProps=z,L.defaultProps=z;var G=t(60),M=t(324),H=function(e){var n=e.address,t=e.fetchBalance,r=Object(a.useState)([]),c=Object(i.a)(r,2),o=c[0],l=c[1],d=Object(a.useState)(!1),p=Object(i.a)(d,2),j=p[0],x=p[1],f=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),Object(G.d)().then((function(e){e&&l(e)})).catch((function(e){console.log(e)})).finally((function(e){x(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){f()}),[]);var m=function(){var e=Object(s.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),Object(G.a)(n,a).then((function(){Object(A.b)(Object(b.jsx)(V,{text:"Room added successfully."})),f(),t(n)})).catch((function(e){console.log(e),Object(A.b)(Object(b.jsx)(L,{text:"Failed to create room."})),x(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O=function(){var e=Object(s.a)(u.a.mark((function e(a,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),Object(G.e)(n,a,r).then((function(){Object(A.b)(Object(b.jsx)(V,{text:"Reservation made successfully"})),f(),t(n)})).catch((function(e){console.log(e),Object(A.b)(Object(b.jsx)(L,{text:"Failed to make reservation."})),x(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),Object(G.c)(n,a).then((function(){Object(A.b)(Object(b.jsx)(V,{text:"Reservation ended successfully"})),f(),t(n)})).catch((function(e){console.log(e),Object(A.b)(Object(b.jsx)(L,{text:"Failed to end reservation."})),x(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),Object(G.b)(n,a.appId).then((function(){Object(A.b)(Object(b.jsx)(V,{text:"Room deleted successfully"})),f(),t(n)})).catch((function(e){console.log(e),Object(A.b)(Object(b.jsx)(L,{text:"Failed to delete room."})),x(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return j?Object(b.jsx)(P,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[Object(b.jsx)("h1",{className:"fs-4 fw-bold mb-0",children:"Hotel Rooms Reservation"}),Object(b.jsx)(T,{createNewRoom:m})]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("i",{className:"bi bi-bell-fill"})," Holding fee for any reservation is 1 Algo."]}),Object(b.jsx)(M.a,{xs:1,sm:2,lg:3,className:"g-3 mb-5 g-xl-4 g-xxl-5",children:Object(b.jsx)(b.Fragment,{children:o.map((function(e,t){return Object(b.jsx)(F,{address:n,room:e,makeReservation:O,endReservation:h,deleteRoom:g},t)}))})})]})},U=t(9),W=t.p+"static/media/hotelroom.76d53c1d.jpg",J=function(){var e=Object(a.useState)(null),n=Object(i.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(null),o=Object(i.a)(c,2),l=o[0],d=o[1],j=Object(a.useState)(0),x=Object(i.a)(j,2),f=x[0],m=x[1],O=function(){var e=Object(s.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U.d.lookupAccountByID(n).do().then((function(e){var n=e.account.amount;m(n)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U.f.connect().then((function(e){var n=e[0];r(n.address),d(n.name),O(n.address)})).catch((function(e){console.log("Could not connect to MyAlgo wallet"),console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(B,{}),t?Object(b.jsxs)(R.a,{fluid:"md",children:[Object(b.jsx)(N.a,{className:"justify-content-end pt-3 pb-5",children:Object(b.jsx)(N.a.Item,{children:Object(b.jsx)(w,{address:t,name:l,amount:f,disconnect:function(){r(null),d(null),m(null)},symbol:"ALGO"})})}),Object(b.jsx)("main",{children:Object(b.jsx)(H,{address:t,fetchBalance:O})})]}):Object(b.jsx)(p,{name:"Hotel Room Reservations",coverImg:W,connect:h})]})},X=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,332)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),a(e),r(e),c(e),o(e)}))};t(313),t(314),t(315);o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(J,{})}),document.getElementById("root")),X()},60:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return O})),t.d(n,"e",(function(){return h})),t.d(n,"c",(function(){return g})),t.d(n,"b",(function(){return v})),t.d(n,"d",(function(){return y}));var a=t(58),r=t(17),c=t(56),o=t(55),s=t(10),i=t.n(s),l=t(14),u=t.n(l),d=t(178),b=t(9),p=t(179),j=t(180),x=t(21),f=Object(c.a)((function e(n,t,a,r,c,s,i,l,u,d){Object(o.a)(this,e),this.appId=t,this.appCreator=n,this.appAddress=a,this.name=r,this.image=c,this.description=s,this.price=i,this.reservedTo=l,this.reserveEnds=u,this.isReserved=d})),m=function(){var n=Object(r.a)(i.a.mark((function n(t){var a,r,c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=new TextEncoder,r=a.encode(t),n.next=4,b.b.compile(r).do();case 4:return c=n.sent,n.abrupt("return",new Uint8Array(e.from(c.result,"base64")));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),O=function(){var e=Object(r.a)(i.a.mark((function e(n,t){var a,r,c,o,s,l,d,x,f,O,h,g,v,y,E;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Adding room..."),e.next=3,b.b.getTransactionParams().do();case 3:return a=e.sent,e.next=6,m(p.a);case 6:return r=e.sent,e.next=9,m(j.a);case 9:return c=e.sent,o=(new TextEncoder).encode(b.c),s=(new TextEncoder).encode(t.name),l=(new TextEncoder).encode(t.image),d=(new TextEncoder).encode(t.description),x=u.a.encodeUint64(t.price),f=[s,l,d,x],O=u.a.makeApplicationCreateTxnFromObject({from:n,suggestedParams:a,onComplete:u.a.OnApplicationComplete.NoOpOC,approvalProgram:r,clearProgram:c,numLocalInts:b.j,numLocalByteSlices:b.i,numGlobalInts:b.h,numGlobalByteSlices:b.g,note:o,appArgs:f}),h=O.txID().toString(),e.next=20,b.f.signTransaction(O.toByte());case 20:return g=e.sent,console.log("Signed transaction with txID: %s",h),e.next=24,b.b.sendRawTransaction(g.blob).do();case 24:return e.next=26,u.a.waitForConfirmation(b.b,h,4);case 26:return v=e.sent,console.log("Transaction "+h+" confirmed in round "+v["confirmed-round"]),e.next=30,b.b.pendingTransactionInformation(h).do();case 30:return y=e.sent,E=y["application-index"],console.log("Created new app-id: ",E),e.abrupt("return",E);case 34:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),h=function(){var e=Object(r.a)(i.a.mark((function e(n,t,a){var r,c,o,s,l,d,p,j,x,f,m,O,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Reserving room..."),e.next=3,b.b.getTransactionParams().do();case 3:for(r=e.sent,c=(new TextEncoder).encode("make"),o=u.a.encodeUint64(a),s=[c,o],l=u.a.makeApplicationCallTxnFromObject({from:n,appIndex:t.appId,onComplete:u.a.OnApplicationComplete.NoOpOC,suggestedParams:r,appArgs:s}),d=t.price*a+1e6,p=u.a.makePaymentTxnWithSuggestedParamsFromObject({from:n,to:t.appAddress,amount:d,suggestedParams:r}),j=[l,p],x=u.a.computeGroupID(j),f=0;f<2;f++)j[f].group=x;return e.next=15,b.f.signTransaction(j.map((function(e){return e.toByte()})));case 15:return m=e.sent,console.log("Signed group transaction"),e.next=19,b.b.sendRawTransaction(m.map((function(e){return e.blob}))).do();case 19:return O=e.sent,e.next=22,u.a.waitForConfirmation(b.b,O.txId,4);case 22:h=e.sent,console.log("Group transaction "+O.txId+" confirmed in round "+h["confirmed-round"]);case 24:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(r.a)(i.a.mark((function e(n,t){var a,r,c,o,s,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Ending reservation..."),e.next=3,b.b.getTransactionParams().do();case 3:return(a=e.sent).fee=2*u.a.ALGORAND_MIN_TX_FEE,a.flatFee=!0,r=(new TextEncoder).encode("end"),c=[r],o=u.a.makeApplicationCallTxnFromObject({from:n,appIndex:t.appId,onComplete:u.a.OnApplicationComplete.NoOpOC,suggestedParams:a,appArgs:c}),s=o.txID().toString(),e.next=12,b.f.signTransaction(o.toByte());case 12:return l=e.sent,console.log("Signed transaction with txID: %s",s),e.next=16,b.b.sendRawTransaction(l.blob).do();case 16:return e.next=18,u.a.waitForConfirmation(b.b,s,4);case 18:d=e.sent,console.log("Transaction "+s+" confirmed in round "+d["confirmed-round"]);case 20:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(){var e=Object(r.a)(i.a.mark((function e(n,t){var a,r,c,o,s,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Deleting application..."),e.next=3,b.b.getTransactionParams().do();case 3:return a=e.sent,r=u.a.makeApplicationDeleteTxnFromObject({from:n,suggestedParams:a,appIndex:t}),c=r.txID().toString(),e.next=8,b.f.signTransaction(r.toByte());case 8:return o=e.sent,console.log("Signed transaction with txID: %s",c),e.next=12,b.b.sendRawTransaction(o.blob).do();case 12:return e.next=14,u.a.waitForConfirmation(b.b,c,4);case 14:return s=e.sent,console.log("Transaction "+c+" confirmed in round "+s["confirmed-round"]),e.next=18,b.b.pendingTransactionInformation(c).do();case 18:l=e.sent,d=l.txn.txn.apid,console.log("Deleted app-id: ",d);case 21:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),y=function(){var n=Object(r.a)(i.a.mark((function n(){var t,r,c,o,s,l,u,d,p;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Fetching rooms..."),t=(new TextEncoder).encode(b.c),r=e.from(t).toString("base64"),n.next=5,b.d.searchForTransactions().notePrefix(r).txType("appl").minRound(b.e).do();case 5:c=n.sent,o=[],s=Object(a.a)(c.transactions),n.prev=8,s.s();case 10:if((l=s.n()).done){n.next=20;break}if(u=l.value,!(d=u["created-application-index"])){n.next=18;break}return n.next=16,E(d);case 16:(p=n.sent)&&o.push(p);case 18:n.next=10;break;case 20:n.next=25;break;case 22:n.prev=22,n.t0=n.catch(8),s.e(n.t0);case 25:return n.prev=25,s.f(),n.finish(25);case 28:return console.log("rooms fetched."),n.abrupt("return",o);case 30:case"end":return n.stop()}}),n,null,[[8,22,25,28]])})));return function(){return n.apply(this,arguments)}}(),E=function(){var e=Object(r.a)(i.a.mark((function e(n){var t,a,r,c,o,s,l,p,j,m,O,h,g,v,y,E;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.d.lookupApplications(n).includeAll(!0).do();case 3:if(!(t=e.sent).application.deleted){e.next=6;break}return e.abrupt("return",null);case 6:return a=t.application.params["global-state"],r=t.application.params.creator,c=u.a.getApplicationAddress(n),o="",s="",l="",p=0,j="",m=0,O=0,h=function(e,n){return n.find((function(n){return n.key===Object(x.f)(e)}))},void 0!==h("NAME",a)&&(g=h("NAME",a).value.bytes,o=Object(x.a)(g)),void 0!==h("IMAGE",a)&&(v=h("IMAGE",a).value.bytes,s=Object(x.a)(v)),void 0!==h("DESCRIPTION",a)&&(y=h("DESCRIPTION",a).value.bytes,l=Object(x.a)(y)),void 0!==h("PRICE",a)&&(p=h("PRICE",a).value.uint),void 0!==h("RESERVE_ENDS",a)&&(m=h("RESERVE_ENDS",a).value.uint),void 0!==h("RESERVED",a)&&(O=h("RESERVED",a).value.uint),void 0!==h("RESERVED_TO",a)&&(E=h("RESERVED_TO",a).value.bytes,1===O&&(j=u.a.encodeAddress(d.a.toUint8Array(E)))),e.abrupt("return",new f(r,n,c,o,s,l,p,j,m,O));case 27:return e.prev=27,e.t0=e.catch(0),e.abrupt("return",null);case 30:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(n){return e.apply(this,arguments)}}()}).call(this,t(15).Buffer)},9:function(e,n,t){"use strict";t.d(n,"b",(function(){return p})),t.d(n,"d",(function(){return j})),t.d(n,"f",(function(){return x})),t.d(n,"e",(function(){return f})),t.d(n,"c",(function(){return m})),t.d(n,"j",(function(){return O})),t.d(n,"i",(function(){return h})),t.d(n,"h",(function(){return g})),t.d(n,"g",(function(){return v})),t.d(n,"a",(function(){return y}));var a=t(14),r=t.n(a),c=t(174),o=t.n(c),s="",i="https://node.testnet.algoexplorerapi.io",l="",u="",d="https://algoindexer.testnet.algoexplorerapi.io",b="",p=new r.a.Algodv2(s,i,l),j=new r.a.Indexer(u,d,b),x=new o.a,f=21540981,m="hotel-reservation:uv1",O=0,h=0,g=3,v=4,y=6}},[[316,1,2]]]);
//# sourceMappingURL=main.b0de4155.chunk.js.map